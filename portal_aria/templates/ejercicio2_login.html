<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo }}</title>
    <meta name="description" content="{{ descripcion }}">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        /* Estilos espec√≠ficos para el formulario de login */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .login-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .login-header {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .login-form {
            padding: 3rem 2rem;
        }
        
        /* PROBLEMAS INTENCIONADOS DE ESTILOS */
        .password-toggle {
            cursor: pointer;
            color: #6c757d;
        }
        
        .error-state {
            border-color: #dc3545 !important;
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }
        
        /* PROBLEMA: Estados de error poco visibles */
        .form-error {
            color: #ff6b6b;
            font-size: 0.8rem;
            margin-top: 0.25rem;
        }
        
        /* PROBLEMA: Loading state no accesible */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .progress-indicator {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
        }
        
        /* PROBLEMA: Foco no visible */
        .form-control:focus {
            outline: none;
        }
        
        .captcha-container {
            border: 1px solid #ddd;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 5px;
            margin: 1rem 0;
        }
    </style>
</head>

<body>
    <!-- PROBLEMA: Falta skip link -->
    
    <div class="login-container">
        <div class="container">
            <div class="login-card">
                <div class="row g-0">
                    <!-- Panel izquierdo con informaci√≥n -->
                    <div class="col-lg-6 login-header">
                        <!-- PROBLEMA: Encabezado sin estructura apropiada -->
                        <div style="font-size: 2.5rem; font-weight: bold;">TechHub</div>
                        <div style="font-size: 1.2rem; margin-top: 1rem; opacity: 0.9;">
                            Accede a tu cuenta para disfrutar de contenido exclusivo
                        </div>
                        
                        <!-- PROBLEMA: Lista de beneficios sin estructura sem√°ntica -->
                        <div style="margin-top: 2rem; text-align: left;">
                            <div style="margin-bottom: 1rem;">
                                <!-- PROBLEMA: Iconos sin descripci√≥n -->
                                ‚úÖ Art√≠culos premium exclusivos
                            </div>
                            <div style="margin-bottom: 1rem;">
                                ‚úÖ Tutoriales paso a paso
                            </div>
                            <div style="margin-bottom: 1rem;">
                                ‚úÖ Comunidad de desarrolladores
                            </div>
                            <div style="margin-bottom: 1rem;">
                                ‚úÖ Soporte prioritario
                            </div>
                        </div>
                    </div>
                    
                    <!-- Panel derecho con formulario -->
                    <div class="col-lg-6 login-form">
                        <!-- PROBLEMA: Formulario sin landmark apropiado -->
                        <div>
                            <!-- PROBLEMA: Encabezado sin nivel apropiado -->
                            <div style="font-size: 1.8rem; font-weight: 500; margin-bottom: 0.5rem;">
                                Iniciar Sesi√≥n
                            </div>
                            <div style="color: #6c757d; margin-bottom: 2rem;">
                                Ingresa tus credenciales para acceder
                            </div>
                            
                            <!-- PROBLEMA: Formulario sin elementos de accesibilidad -->
                            <form id="loginForm" novalidate>
                                
                                <!-- Campo Email - M√öLTIPLES PROBLEMAS -->
                                <div class="mb-3">
                                    <!-- PROBLEMA: Label no asociado correctamente -->
                                    <div class="form-label">Correo Electr√≥nico *</div>
                                    <input type="email" 
                                           class="form-control" 
                                           name="email"
                                           placeholder="tu@email.com"
                                           autocomplete="email">
                                    <!-- PROBLEMA: Mensaje de error no asociado -->
                                    <div class="form-error" style="display: none;">
                                        El email es requerido
                                    </div>
                                </div>
                                
                                <!-- Campo Contrase√±a - PROBLEMAS M√öLTIPLES -->
                                <div class="mb-3">
                                    <div class="form-label">Contrase√±a *</div>
                                    <div style="position: relative;">
                                        <!-- PROBLEMA: Input sin label apropiado -->
                                        <input type="password" 
                                               class="form-control" 
                                               name="password"
                                               placeholder="Tu contrase√±a"
                                               autocomplete="current-password">
                                        
                                        <!-- PROBLEMA: Bot√≥n toggle sin descripci√≥n accesible -->
                                        <span class="password-toggle" 
                                              style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);"
                                              onclick="togglePassword()">
                                            üëÅÔ∏è
                                        </span>
                                    </div>
                                    <div class="form-error" style="display: none;">
                                        La contrase√±a es requerida
                                    </div>
                                    
                                    <!-- PROBLEMA: Indicador de fortaleza sin accesibilidad -->
                                    <div style="margin-top: 0.5rem;">
                                        <div style="font-size: 0.8rem; color: #6c757d;">
                                            Fortaleza de contrase√±a:
                                        </div>
                                        <div style="width: 100%; height: 4px; background: #e9ecef; border-radius: 2px; margin-top: 0.25rem;">
                                            <div id="passwordStrength" 
                                                 style="height: 100%; width: 0%; background: red; border-radius: 2px; transition: all 0.3s;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Recordar sesi√≥n - PROBLEMAS DE ACCESIBILIDAD -->
                                <div class="mb-3">
                                    <div style="display: flex; align-items: center; justify-content: space-between;">
                                        <div>
                                            <!-- PROBLEMA: Checkbox sin label apropiado -->
                                            <input type="checkbox" name="remember" style="margin-right: 0.5rem;">
                                            Recordar mi sesi√≥n
                                        </div>
                                        
                                        <!-- PROBLEMA: Link sin contexto -->
                                        <a href="#" style="color: #007bff; font-size: 0.9rem;">
                                            ¬øOlvidaste tu contrase√±a?
                                        </a>
                                    </div>
                                </div>
                                
                                <!-- CAPTCHA - PROBLEMAS GRAVES DE ACCESIBILIDAD -->
                                <div class="captcha-container">
                                    <!-- PROBLEMA: CAPTCHA sin alternativa accesible -->
                                    <div style="margin-bottom: 1rem;">
                                        <div style="font-weight: 500; margin-bottom: 0.5rem;">
                                            Verificaci√≥n de seguridad
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 1rem;">
                                            <!-- PROBLEMA: Imagen CAPTCHA sin alternativa -->
                                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='50'%3E%3Crect width='150' height='50' fill='%23f8f9fa'/%3E%3Ctext x='75' y='30' text-anchor='middle' fill='%23333' font-size='16'%3E7H2K9%3C/text%3E%3C/svg%3E"
                                                 style="border: 1px solid #ddd;">
                                            
                                            <!-- PROBLEMA: Bot√≥n refresh sin descripci√≥n -->
                                            <button type="button" onclick="refreshCaptcha()" style="border: none; background: none; font-size: 1.2rem; cursor: pointer;">
                                                üîÑ
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- PROBLEMA: Input CAPTCHA sin descripci√≥n -->
                                    <input type="text" 
                                           class="form-control" 
                                           name="captcha"
                                           placeholder="Ingresa el c√≥digo que ves arriba"
                                           style="font-family: monospace;">
                                    
                                    <div class="form-error" style="display: none;">
                                        El c√≥digo CAPTCHA es incorrecto
                                    </div>
                                </div>
                                
                                <!-- T√©rminos y condiciones - PROBLEMAS -->
                                <div class="mb-4">
                                    <!-- PROBLEMA: Checkbox obligatorio sin indicaci√≥n -->
                                    <input type="checkbox" name="terms" style="margin-right: 0.5rem;">
                                    <span style="font-size: 0.9rem;">
                                        Acepto los 
                                        <!-- PROBLEMA: Links sin indicar que abren en nueva ventana -->
                                        <a href="#" target="_blank">t√©rminos y condiciones</a> 
                                        y la 
                                        <a href="#" target="_blank">pol√≠tica de privacidad</a>
                                    </span>
                                    <div class="form-error" style="display: none;">
                                        Debes aceptar los t√©rminos y condiciones
                                    </div>
                                </div>
                                
                                <!-- Botones de acci√≥n - PROBLEMAS -->
                                <div class="mb-3">
                                    <!-- PROBLEMA: Bot√≥n sin indicar estado de carga -->
                                    <button type="submit" 
                                            class="btn btn-primary w-100" 
                                            style="padding: 0.75rem;">
                                        Iniciar Sesi√≥n
                                    </button>
                                </div>
                                
                                <!-- Login con redes sociales - PROBLEMAS -->
                                <div class="text-center">
                                    <div style="margin-bottom: 1rem; color: #6c757d;">
                                        O contin√∫a con:
                                    </div>
                                    
                                    <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                        <!-- PROBLEMA: Botones sociales sin descripci√≥n -->
                                        <button type="button" class="btn btn-outline-secondary" onclick="loginWithGoogle()">
                                            üîç Google
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="loginWithFacebook()">
                                            üìò Facebook
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" onclick="loginWithTwitter()">
                                            üê¶ Twitter
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Registro - PROBLEMA -->
                                <div class="text-center mt-4">
                                    <span style="color: #6c757d;">¬øNo tienes una cuenta?</span>
                                    <!-- PROBLEMA: Link sin contexto claro -->
                                    <a href="#" style="color: #007bff; margin-left: 0.5rem;">
                                        Reg√≠strate aqu√≠
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PROBLEMA: Loading overlay sin accesibilidad -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="progress-indicator">
            <div class="spinner-border text-primary mb-3"></div>
            <div>Iniciando sesi√≥n...</div>
        </div>
    </div>
    
    <!-- PROBLEMA: Mensajes de √©xito/error no accesibles -->
    <div id="messageContainer" style="position: fixed; top: 20px; right: 20px; z-index: 10000;"></div>
    
    <!-- Navegaci√≥n de regreso -->
    <div style="position: fixed; top: 20px; left: 20px; z-index: 1000;">
        <a href="{{ url_for('index') }}" class="btn btn-outline-light">
            ‚Üê Volver al portal
        </a>
    </div>
    
    <script src="{{ url_for('static', filename='js/portal.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // PROBLEMAS INTENCIONADOS EN JAVASCRIPT
        
        // PROBLEMA: Variables globales sin gesti√≥n adecuada
        let isSubmitting = false;
        let passwordVisible = false;
        let captchaAttempts = 0;
        
        // PROBLEMA: Funci√≥n sin manejo de accesibilidad
        function togglePassword() {
            const passwordField = document.querySelector('input[name="password"]');
            const toggleIcon = document.querySelector('.password-toggle');
            
            passwordVisible = !passwordVisible;
            passwordField.type = passwordVisible ? 'text' : 'password';
            toggleIcon.textContent = passwordVisible ? 'üôà' : 'üëÅÔ∏è';
            
            // PROBLEMA: No anuncia el cambio de estado
        }
        
        // PROBLEMA: Funci√≥n CAPTCHA sin accesibilidad
        function refreshCaptcha() {
            const captchaImg = document.querySelector('.captcha-container img');
            // Simular nueva imagen CAPTCHA
            captchaImg.src = captchaImg.src + '?t=' + new Date().getTime();
            
            // PROBLEMA: No anuncia que se refresc√≥
            console.log('CAPTCHA refrescado');
        }
        
        // PROBLEMA: Login social sin feedback
        function loginWithGoogle() {
            alert('Redirigiendo a Google...');
        }
        
        function loginWithFacebook() {
            alert('Redirigiendo a Facebook...');
        }
        
        function loginWithTwitter() {
            alert('Redirigiendo a Twitter...');
        }
        
        // PROBLEMA: Validaci√≥n de contrase√±a sin accesibilidad
        function updatePasswordStrength(password) {
            const strengthBar = document.getElementById('passwordStrength');
            let strength = 0;
            
            if (password.length >= 8) strength += 25;
            if (/[A-Z]/.test(password)) strength += 25;
            if (/[a-z]/.test(password)) strength += 25;
            if (/[0-9]/.test(password)) strength += 25;
            
            strengthBar.style.width = strength + '%';
            
            // PROBLEMA: Colores sin texto descriptivo
            if (strength < 50) {
                strengthBar.style.background = 'red';
            } else if (strength < 75) {
                strengthBar.style.background = 'orange';
            } else {
                strengthBar.style.background = 'green';
            }
            
            // PROBLEMA: No anuncia el nivel de fortaleza
        }
        
        // PROBLEMA: Manejo de errores no accesible
        function showError(fieldName, message) {
            const field = document.querySelector(`[name="${fieldName}"]`);
            const errorDiv = field.parentNode.querySelector('.form-error');
            
            // PROBLEMA: Solo cambio visual
            field.classList.add('error-state');
            errorDiv.style.display = 'block';
            errorDiv.textContent = message;
            
            // PROBLEMA: No enfoca el campo con error
            // PROBLEMA: No usa aria-invalid
        }
        
        // PROBLEMA: Funci√≥n de √©xito sin accesibilidad
        function showMessage(message, type = 'success') {
            const container = document.getElementById('messageContainer');
            const messageDiv = document.createElement('div');
            
            messageDiv.className = `alert alert-${type}`;
            messageDiv.style.marginBottom = '0.5rem';
            messageDiv.textContent = message;
            
            container.appendChild(messageDiv);
            
            // PROBLEMA: No se anuncia a lectores de pantalla
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }
        
        // PROBLEMA: Mostrar loading sin accesibilidad
        function showLoading(show) {
            const overlay = document.getElementById('loadingOverlay');
            overlay.style.display = show ? 'flex' : 'none';
            
            // PROBLEMA: No bloquea interacci√≥n con el resto de la p√°gina
            // PROBLEMA: No anuncia el estado de carga
        }
        
        // Configuraci√≥n del formulario - M√öLTIPLES PROBLEMAS
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('loginForm');
            
            // PROBLEMA: Solo evento submit, sin validaci√≥n en tiempo real
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (isSubmitting) return;
                
                // PROBLEMA: Validaci√≥n b√°sica sin accesibilidad
                const email = form.email.value;
                const password = form.password.value;
                const captcha = form.captcha.value;
                const terms = form.terms.checked;
                
                let hasErrors = false;
                
                // PROBLEMA: Limpieza de errores no accesible
                document.querySelectorAll('.form-error').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.error-state').forEach(el => el.classList.remove('error-state'));
                
                if (!email) {
                    showError('email', 'El correo electr√≥nico es requerido');
                    hasErrors = true;
                }
                
                if (!password) {
                    showError('password', 'La contrase√±a es requerida');
                    hasErrors = true;
                }
                
                if (!captcha) {
                    showError('captcha', 'El c√≥digo CAPTCHA es requerido');
                    hasErrors = true;
                }
                
                if (!terms) {
                    showError('terms', 'Debes aceptar los t√©rminos y condiciones');
                    hasErrors = true;
                }
                
                if (hasErrors) {
                    // PROBLEMA: No enfoca el primer error
                    return;
                }
                
                // Simular env√≠o
                isSubmitting = true;
                showLoading(true);
                
                // PROBLEMA: Simulaci√≥n sin feedback accesible apropiado
                setTimeout(() => {
                    showLoading(false);
                    isSubmitting = false;
                    
                    // Simular respuesta aleatoria
                    if (Math.random() > 0.3) {
                        showMessage('¬°Inicio de sesi√≥n exitoso! Redirigiendo...', 'success');
                        setTimeout(() => {
                            window.location.href = '/';
                        }, 2000);
                    } else {
                        showMessage('Credenciales incorrectas. Int√©ntalo de nuevo.', 'danger');
                    }
                }, 2000);
            });
            
            // PROBLEMA: Listener de contrase√±a sin debounce
            document.querySelector('[name="password"]').addEventListener('input', function(e) {
                updatePasswordStrength(e.target.value);
            });
            
            // PROBLEMA: Eventos de teclado no manejados
            // FALTA: Enter en campos debe enviar formulario
            // FALTA: Escape debe cancelar
        });
    </script>
    
</body>
</html>

<!--
PROBLEMAS DE ACCESIBILIDAD PARA CORREGIR EN ESTE EJERCICIO:

ESTRUCTURA Y LANDMARKS:
1. ‚úó Falta skip link
2. ‚úó Formulario sin landmark <main> o role="main"  
3. ‚úó Encabezados sin estructura sem√°ntica apropiada (h1, h2, etc.)

FORMULARIOS Y LABELS:
4. ‚úó Labels no asociados correctamente con inputs
5. ‚úó Campos requeridos sin aria-required
6. ‚úó Mensajes de error no asociados con aria-describedby
7. ‚úó Checkbox sin labels apropiados
8. ‚úó Campos sin aria-invalid cuando hay errores

CAPTCHA Y VERIFICACI√ìN:
9. ‚úó CAPTCHA sin alternativa accesible
10. ‚úó Imagen CAPTCHA sin texto alternativo
11. ‚úó Bot√≥n refresh CAPTCHA sin aria-label
12. ‚úó Input CAPTCHA sin descripci√≥n de qu√© hacer

INTERACTIVIDAD:
13. ‚úó Bot√≥n toggle password sin aria-label
14. ‚úó Estado de password visible/oculto no anunciado
15. ‚úó Botones sociales sin descripci√≥n apropiada
16. ‚úó Enlaces que abren nueva ventana sin indicaci√≥n

ESTADOS Y FEEDBACK:
17. ‚úó Indicador de fortaleza de contrase√±a no accesible
18. ‚úó Estados de carga no anunciados
19. ‚úó Overlay de loading sin manejo de foco
20. ‚úó Mensajes de √©xito/error no anunciados a lectores de pantalla

NAVEGACI√ìN CON TECLADO:
21. ‚úó Foco no visible en algunos elementos
22. ‚úó Trap de foco no implementado en overlay
23. ‚úó Tecla Escape no maneja cancelar loading

CONTENIDO DIN√ÅMICO:
24. ‚úó Cambios din√°micos no anunciados
25. ‚úó Falta regiones aria-live apropiadas
26. ‚úó Actualizaciones de UI sin feedback accesible

SEM√ÅNTICA:
27. ‚úó Lista de beneficios sin <ul>/<li>
28. ‚úó Iconos sin texto descriptivo
29. ‚úó Links sin contexto suficiente

El equipo debe implementar:
- Asociar labels correctamente (for/id o envolver)
- Usar aria-required, aria-invalid, aria-describedby
- Implementar alternativas accesibles para CAPTCHA
- A√±adir aria-labels apropiados para botones/controles
- Crear regiones aria-live para feedback din√°mico
- Manejar estados de foco correctamente
- Mejorar navegaci√≥n con teclado
- Usar roles ARIA apropiados (alert, status, etc.)
- Indicar enlaces externos con aria-label
- Hacer contenido din√°mico accesible
-->